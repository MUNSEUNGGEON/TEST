(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec2bf85a"],{"07e6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"contents-wrap"},[s("Location",{attrs:{location:e.location}}),s("div",{staticClass:"contents collection"},[s("h2",{staticClass:"title"},[e._v(e._s(e.title))]),s("div",{staticClass:"list-wrap",staticStyle:{display:"flex"}},[s("grid-vx",{ref:"vxList",attrs:{columns:e.projectColumns,rows:e.projectRows,totalCount:e.projectTotalCount,offset:e.projectOffset,defaultPageSize:e.projectLimit,getRowNodeId:function(t){return t.id},context:e.projectContext,frameworkComponents:e.frameworkComponents,rowSelection:"multiple"},on:{refresh:function(e){return t.projectSearch(!1,e)}}},[s("div",{staticClass:"grid-t-r"},[s("div",{staticClass:"btns"},[s("button",{staticClass:"btn-s dark-blue",on:{click:e.createCvatProject}},[e._v("\n              프로젝트 생성\n            ")])])])]),s("div",{staticStyle:{width:"120px"}}),s("grid-vx",{ref:"vxList",attrs:{columns:e.tasksColumns,rows:e.tasksRows,totalCount:e.tasksTotalCount,offset:e.tasksOffset,defaultPageSize:e.tasksLimit,getRowNodeId:function(t){return t.id},context:e.tasksContext,frameworkComponents:e.frameworkComponents,rowSelection:"multiple"},on:{refresh:function(e){return t.taskSearch(!1,e)}}})],1)]),s("open-window",{attrs:{view:e.workListView,width:"900px",height:"590px"},on:{closeDialog:function(t){e.workListView=!1}}},[s("WorkListView",{attrs:{selectedTask:e.selectedTask}})],1)],1)},n=[],o=(a("159b"),a("b0c0"),a("a15b"),a("ac1f"),a("5319"),a("d81d"),a("a026")),i=a("cbd7"),r=a("7790"),l=a("b3a2"),c=a("feca"),d=o["default"].extend({template:'\n    <span class="btn-link_txt" @click="onloardProjectTask">{{ rowData }}</span>\n  ',beforeMount:function(){this.rowData=this.params.value},methods:{onloardProjectTask:function(){this.params.context.componentParent.selectedProject=this.params.data.id,this.params.context.componentParent.taskApi()}}}),u=o["default"].extend({template:"\n    <span>{{ rowData }}</span>\n  ",beforeMount:function(){var t=[],e=this.params.value;e.forEach((function(e){t.push(e.name)})),this.rowData=t.join(",")}}),h=o["default"].extend({template:"\n    <span>{{ rowData }}</span>\n  ",beforeMount:function(){var t=new Date(this.params.value),e="YYYY.MM.DD",a=o["default"].moment(t,e.replace(/[- :]/g,"")),s=o["default"].moment(a).format(e);this.rowData=s}}),p=o["default"].extend({template:'\n    <select v-model="rowData" class="input-select"  @change="onChange">\n      <option v-for="(select, index) in list" :key="index" :value="select.tulCvatId" >{{select.tulName}}</option>\n    </select>\n  ',beforeMount:function(){this.list=this.params.context.componentParent.userList,this.rowData=null,this.params.value&&(this.rowData=this.params.value.id)},methods:{onChange:function(){this.params.data.assignee?this.params.data.assignee.id=this.rowData:this.params.data.assignee={id:this.rowData},this.params.context.componentParent.projectChangeAssignee(this.params.data)}}}),f=o["default"].extend({template:'\n    <select v-model="rowData" class="input-select"  @change="onChange">\n      <option v-for="(select, index) in list" :key="index" :value="select.tulCvatId" >{{select.tulName}}</option>\n    </select>\n  ',beforeMount:function(){this.list=this.params.context.componentParent.userList,this.rowData=null,this.params.value&&(this.rowData=this.params.value.id)},methods:{onChange:function(){this.params.data.assignee?this.params.data.assignee.id=this.rowData:this.params.data.assignee={id:this.rowData},this.params.context.componentParent.tasksChangeAssignee(this.params.data)}}}),m=o["default"].extend({template:'\n    <span class="btn-link_txt" @click="onSelectTask">{{ rowData }}</span>\n  ',beforeMount:function(){this.rowData=this.params.value},methods:{onSelectTask:function(){this.params.context.componentParent.onJobsListView(this.params.data.id)}}}),g=o["default"].extend({template:"\n    <span>{{ rowData }}</span>\n  ",beforeMount:function(){var t="",e=this.params.value.length,a=0,s=this.params.value;s.forEach((function(t){t.jobs.forEach((function(t){"acceptance"===t.stage&&(a+=1)}))})),t=a&&a===e?"완료":a?"진행 중":"시작 전",this.rowData=t}}),w={components:{GridVx:i["a"],Location:l["a"],OpenWindow:r["a"],WorkListView:c["a"]},data:function(){return{location:[],title:"",workListView:!1,userList:[],selectedProject:null,projectContext:{},projectOffset:0,projectPage:1,projectLimit:10,projectTotalCount:0,projectRows:[],projectColumns:[{headerName:"프로젝트 명",field:"name",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellLinkProjectSelect",width:200},{headerName:"라벨",field:"labels",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellCollectsLabel",width:150},{headerName:"생성일",field:"created_date",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellDateLabel",width:80},{headerName:"할당",field:"assignee",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellProjectUserSelectbox",width:80}],selectedTask:null,tasksContext:{},tasksOffset:0,tasksPage:1,tasksLimit:10,tasksTotalCount:0,tasksRows:[],tasksColumns:[{headerName:"업무 명",field:"name",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellLinkTaskSelect",width:200},{headerName:"최근 작업일",field:"updated_date",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellDateLabel",width:150},{headerName:"이미지 수",field:"size",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},width:80},{headerName:"할당",field:"assignee",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellTasksUserSelectbox",width:80},{headerName:"진행 상태",field:"segments",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellTasksStatusLabel",width:150}],frameworkComponents:{cellLinkProjectSelect:d,cellCollectsLabel:u,cellDateLabel:h,cellProjectUserSelectbox:p,cellTasksUserSelectbox:f,cellLinkTaskSelect:m,cellTasksStatusLabel:g}}},methods:{userApi:function(){var t=this;this.$vxHttp.get("/lim-api/user/list").then((function(e){t.userList=e.data.users}))},createCvatProject:function(){this.$store.commit("cvat/setCvatUrl","/projects/create"),this.$store.commit("cvat/goCvatPopup")},projectSearch:function(t,e){this.projectPage=e.page2+1,this.projectLimit=e.limit,this.projectApi()},projectApi:function(){var t=this,e={page:this.projectPage,pageSize:this.projectLimit};this.$vxHttp.post("/lim-api/cvat/projectList",e).then((function(e){t.projectTotalCount=e.data.list.count,t.projectRows=e.data.list.results,e.data.list.results.length>0&&(t.selectedProject=t.projectRows[0].id)})).catch((function(e){t.$vxToast(e.data.resMsg)}))},projectChangeAssignee:function(t){var e=this,a={path:t.id,params:{assignee_id:t.assignee.id}};this.$vxHttp.post("/lim-api/cvat/project/change",a).then((function(t){e.$vxToast(t.data.resMsg)})).catch((function(t){e.$vxToast(t.data.resMsg)}))},taskSearch:function(t,e){this.tasksPage=e.page2+1,this.tasksLimit=e.limit,this.taskApi()},taskApi:function(){var t=this,e={path:this.selectedProject,page:this.tasksPage,pageSize:this.tasksLimit};this.$vxHttp.post("/lim-api/cvat/projectTasks",e).then((function(e){t.tasksTotalCount=e.data.list.count,t.tasksRows=e.data.list.results})).catch((function(e){t.$vxToast(e.data.resMsg)}))},tasksChangeAssignee:function(t){var e=this,a={path:t.id,params:{assignee_id:t.assignee.id}};this.$vxHttp.post("/lim-api/cvat/task/change",a).then((function(t){e.$vxToast(t.data.resMsg)})).catch((function(t){e.$vxToast(t.data.resMsg)}))},onJobsListView:function(t){this.selectedTask=t,this.workListView=!0}},created:function(){var t=this;this.projectContext={componentParent:this},this.tasksContext={componentParent:this},this.title=this.$route.name,this.$route.matched.map((function(e){t.location.push(e.name)})),this.userApi()},mounted:function(){this.projectApi()}},v=w,x=a("2877"),b=Object(x["a"])(v,s,n,!1,null,null,null);e["default"]=b.exports},7156:function(t,e,a){var s=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var o,i;return n&&"function"==typeof(o=e.constructor)&&o!==a&&s(i=o.prototype)&&i!==a.prototype&&n(t,i),t}},"983a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid-bottom"},[a("ag-grid-vue",{staticClass:"ag-theme-balham",attrs:{gridOptions:t.gridOptions,columnDefs:t.getColumns,rowData:t.rows,rowSelection:t.rowSelection,suppressRowClickSelection:"multiple"===t.rowSelection,getRowNodeId:t.getRowNodeId,defaultColDef:t.defaultColDef,overlayLoadingTemplate:t.overlayLoadingTemplate,frameworkComponents:t.frameworkComponents,context:t.context,suppressRowTransform:t.suppressRowTransform,tooltipShowDelay:0,enableBrowserTooltips:!0,rowDragManaged:t.rowDragManaged,animateRows:t.animateRows,suppressMoveWhenRowDragging:t.suppressMoveWhenRowDragging,undoRedoCellEditing:!0},on:{sortChanged:t.onSortChanged,"selection-changed":t.onSelectionChanged,rowClicked:t.onRowClicked,"cell-value-changed":t.onCellValueChanged,"row-drag-end":t.onRowDragEnd}})],1)},n=[],o=a("5530"),i=(a("159b"),a("4e82"),a("ac1f"),a("5319"),a("d81d"),a("401b")),r={components:{AgGridVue:i["AgGridVue"]},props:{columns:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},disabledSortable:{type:Boolean,default:null},frameworkComponents:{type:Object,default:function(){return null}},context:{type:Object,default:function(){}},suppressRowTransform:{type:Boolean,default:!1},getRowNodeId:null,rowSelection:{type:String,default:"multiple"},wrapText:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},rowDragManaged:{type:Boolean,default:!1},animateRows:{type:Boolean,default:!1},suppressMoveWhenRowDragging:{type:Boolean,default:!1}},data:function(){return{defaultColDef:{suppressMovable:!0,resizable:!1,wrapText:this.wrapText,autoHeight:this.autoHeight},sortColumn:null,sortOrder:null,gridOptions:null,gridApi:null,overlayLoadingTemplate:'<span class="ag-overlay-loading-center"><div class="loader">Loading...</div></span>'}},methods:{onRowClick:function(t){if("cell"===t.targetType){var e=t.rowKey;this.$emit("rowClick",this.rows[e])}},onSortChanged:function(t){var e=this;this.sortColumn=null,this.sortOrder=null,t.columnApi.getColumnState().forEach((function(t){if(null!==t.sort)return e.sortColumn=t.colId,e.sortOrder="asc"===t.sort?1:2,!1})),this.doRefresh()},doRefresh:function(){var t={orderBy:this.sortColumn,sort:this.sortOrder};this.$emit("refresh",t)},camelToSnakeCase:function(t){return t.replace(/[A-Z]/g,(function(t){return"_".concat(t.toLowerCase())}))},sizeToFit:function(){this.gridApi.sizeColumnsToFit()},onSelectionChanged:function(){var t=this.gridApi.getSelectedRows();this.$emit("selectionChanged",t)},onRowClicked:function(){var t=this.gridApi.getSelectedRows();this.$emit("rowClicked",t[0])},onRowDragEnd:function(t){this.$emit("onRowDragEnd",t)},onCellValueChanged:function(t){var e=t.newValue,a=t.colDef,s=t.rowIndex,n=!1;n=this.rows.some((function(t,n){if(n!=s&&t[a.field]===e)return!0})),this.$emit("cellValueChanged",n)}},computed:{getColumns:function(){var t=this.disabledSortable;return null===t?this.columns:this.columns.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{sortable:!t})}))}},beforeMount:function(){this.gridOptions={pagination:!1,paginationAutoPageSize:!1,headerHeight:41,rowHeight:38,localeText:{noRowsToShow:"데이터가 없습니다."}}},mounted:function(){this.gridApi=this.gridOptions.api,setTimeout(this.sizeToFit,100),window.addEventListener("resize",this.sizeToFit)},beforeDestroy:function(){window.removeEventListener("resize",this.sizeToFit)},watch:{rows:function(){setTimeout(this.sizeToFit,0)}}},l=r,c=a("2877"),d=Object(c["a"])(l,s,n,!1,null,null,null);e["a"]=d.exports},a9e3:function(t,e,a){"use strict";var s=a("83ab"),n=a("da84"),o=a("94ca"),i=a("6eeb"),r=a("5135"),l=a("c6b6"),c=a("7156"),d=a("c04e"),u=a("d039"),h=a("7c73"),p=a("241c").f,f=a("06cf").f,m=a("9bf2").f,g=a("58a8").trim,w="Number",v=n[w],x=v.prototype,b=l(h(x))==w,C=function(t){var e,a,s,n,o,i,r,l,c=d(t,!1);if("string"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+c}for(o=c.slice(2),i=o.length,r=0;r<i;r++)if(l=o.charCodeAt(r),l<48||l>n)return NaN;return parseInt(o,s)}return+c};if(o(w,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,S=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof S&&(b?u((function(){x.valueOf.call(a)})):l(a)!=w)?c(new v(C(e)),a,S):C(e)},j=s?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;j.length>T;T++)r(v,k=j[T])&&!r(S,k)&&m(S,k,f(v,k));S.prototype=x,x.constructor=S,i(n,w,S)}},feca:function(t,e,a){"use strict";var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("section",{staticClass:"detail-wrap"},[s("h2",{staticClass:"title br-bottom"},[e._v("작업 목록")]),s("div",{staticClass:"pop-grid"},[s("div",{staticClass:"grid-wrap"},[s("GridVxScroll",{ref:"vxList",attrs:{columns:e.columns,rows:e.rows,getRowNodeId:function(t){return t.id},context:e.context,frameworkComponents:e.frameworkComponents,rowSelection:"single"},on:{refresh:function(e){return t.jobSearch(e)}}})],1)])])},n=[],o=(a("a9e3"),a("a026")),i=a("983a"),r=o["default"].extend({template:'\n    <span class="btn-link_txt" @click="popUp">{{rowData}}</span>\n  ',beforeMount:function(){this.rowData=this.params.value},methods:{popUp:function(){this.params.context.componentParent.onCvatWindow("/tasks/"+this.params.context.componentParent.selectedTask+"/jobs/"+this.rowData)}}}),l=o["default"].extend({template:'\n    <select v-model="rowData" class="input-select"  @change="onChange">\n      <option v-for="(select, index) in list" :key="index" :value="select.tulCvatId" >{{select.tulName}}</option>\n    </select>\n  ',beforeMount:function(){this.list=this.params.context.componentParent.userList,this.rowData=null,this.params.value&&(this.rowData=this.params.value.id)},methods:{onChange:function(){this.params.data.assignee?this.params.data.assignee.id=this.rowData:this.params.data.assignee={id:this.rowData},this.params.context.componentParent.jobChangeAssignee(this.params.data)}}}),c=o["default"].extend({template:"\n    <span>{{ rowData }}</span>\n  ",beforeMount:function(){var t="",e=this.params.value;t="completed"===e?"완료":"rejected"===e?"반려":"진행 중",this.rowData=t}}),d={components:{GridVxScroll:i["a"]},props:{selectedTask:{type:Number,default:null}},data:function(){return{context:{},userList:[],rows:[],columns:[{headerName:"작업 아이디",field:"id",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellLinkText",width:90},{headerName:"시작 프레임",field:"start_frame",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},width:70},{headerName:"종료 프레임",field:"stop_frame",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},width:70},{headerName:"할당",field:"assignee",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellJobsUserSelectbox",width:100},{headerName:"작업 형태",field:"stage",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},width:100},{headerName:"진행 상태",field:"state",hide:!1,sortable:!1,cellStyle:{"text-align":"center"},cellRenderer:"cellStateLabel",width:80}],frameworkComponents:{cellLinkText:r,cellJobsUserSelectbox:l,cellStateLabel:c}}},methods:{userApi:function(){var t=this;this.$vxHttp.get("/lim-api/user/list").then((function(e){t.userList=e.data.users}))},jobSearch:function(t){this.page=t.page,this.limit=t.limit,this.jobApi()},jobApi:function(){var t=this,e={path:this.selectedTask};this.$vxHttp.post("/lim-api/cvat/taskJobs",e).then((function(e){t.totalCount=e.data.list.length,t.rows=e.data.list})).catch((function(e){t.$vxToast(e.data.resMsg)}))},jobChangeAssignee:function(t){var e=this,a={path:t.id,params:{assignee:t.assignee.id}};this.$vxHttp.post("/lim-api/cvat/job/change",a).then((function(t){e.$vxToast(t.data.resMsg)})).catch((function(t){e.$vxToast(t.data.resMsg)}))},onCvatWindow:function(t){this.$store.commit("cvat/setCvatUrl",t),this.$store.commit("cvat/goCvatPopup")}},mounted:function(){this.jobApi()},created:function(){this.context={componentParent:this},this.userApi()}},u=d,h=a("2877"),p=Object(h["a"])(u,s,n,!1,null,null,null);e["a"]=p.exports}}]);
//# sourceMappingURL=chunk-ec2bf85a.79145786.js.map